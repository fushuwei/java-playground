# 服务器配置
server:
  # 服务端口
  port: 8080

# Spring 配置
spring:
  # 应用配置
  application:
    # 应用名称
    name: spring-security-simple
  # 数据源配置
  datasource:
    # JDBC 驱动类
    driver-class-name: com.mysql.cj.jdbc.Driver
    # JDBC URL
    url: jdbc:mysql://localhost:3306/spring_security?useSSL=false&useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    # 数据库用户名
    username: root
    # 数据库密码
    password: 123456
    # HikariCP 连接池配置
    hikari:
      # 连接池的名称，用于日志和监控
      pool-name: HikariCP-${spring.application.name}
      # 连接池的最大连接数
      maximum-pool-size: 30
      # 连接池的最小空闲连接数
      minimum-idle: 10
      # 连接的超时时间（毫秒），默认 30000 (30秒)，如果在指定时间内无法从连接池获取到连接，则会抛出 SQLException
      connection-timeout: 30000
      # 空闲连接的超时时间（毫秒），默认 600000 (10分钟)，一个连接空闲超过这个时间，则会被回收
      idle-timeout: 600000
      # 连接的最大生命周期（毫秒），默认 1740000 (29分钟)，空闲连接超时后由池回收，使用中的连接归还时若超时则丢弃
      max-lifetime: 1740000
      # 连接泄漏检测阈值（毫秒），超过 60000 (60秒) 未归还连接就打印警告，生产环境不建议开启，当系统存在长时间的数据库操作时，会产生大量日志噪音
      leak-detection-threshold: 60000
      # 连接测试查询语句，用于验证连接是否有效
      connection-test-query: SELECT 1
      # 数据源属性配置，用于优化数据库连接性能
      data-source-properties:
        # 是否缓存预编译语句，开启后可提高执行效率
        cachePrepStmts: true
        # 预编译语句缓存大小，控制缓存中预编译语句的数量
        prepStmtCacheSize: 250
        # 预编译语句SQL长度限制，避免缓存过大的SQL语句
        prepStmtCacheSqlLimit: 2048
        # 是否使用服务器端预编译语句，减少网络传输和解析开销
        useServerPrepStmts: true
        # 是否重写批处理语句，将多个INSERT语句合并为单个语句发送到数据库
        rewriteBatchedStatements: true
        # 是否使用本地会话状态，减少与服务器的交互次数
        useLocalSessionState: true
        # 是否维护时间统计信息，关闭后可略微提升性能
        maintainTimeStats: false
  # Redis 配置
  data:
    redis:
      # Redis 服务器地址
      host: localhost
      # Redis 服务器端口
      port: 6379
      # Redis 数据库索引
      database: 0
      # Redis 服务器密码（默认为空）
      password: 123456
      # 连接超时时间（毫秒）
      timeout: 2000
      # Lettuce 连接池配置
      lettuce:
        pool:
          # 连接池最大连接数
          max-active: 8
          # 连接池最大阻塞等待时间（负值表示无限制）
          max-wait: -1
          # 连接池最大空闲连接数
          max-idle: 8
          # 连接池最小空闲连接数
          min-idle: 0
  # SQL 配置
  sql:
    # 初始化配置
    init:
      # schema 脚本位置，用于初始化数据库表结构
      schema-locations: classpath:db/schema.sql
      # data 脚本位置，用于初始化数据库数据
      data-locations: classpath:db/data.sql
      # 是否在发生错误时继续执行后续脚本
      continue-on-error: true
      # 初始化模式，always 表示每次启动都执行初始化脚本
      mode: always
